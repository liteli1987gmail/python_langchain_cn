---
sidebar_position: 0
---

# LangChain æ¨¡æ¿

LangChain æ¨¡æ¿æ˜¯æ„å»ºç”Ÿäº§å°±ç»ª LLM åº”ç”¨ç¨‹åºçš„æœ€ç®€å•å’Œæœ€å¿«çš„æ–¹å¼ã€‚
è¿™äº›æ¨¡æ¿ä½œä¸ºå„ç§æµè¡Œçš„ LLM ä½¿ç”¨æ¡ˆä¾‹çš„å‚è€ƒæ¶æ„ã€‚
å®ƒä»¬éƒ½é‡‡ç”¨æ ‡å‡†æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ [LangServe](https://github.com/langchain-ai/langserve) è½»æ¾éƒ¨ç½²å®ƒä»¬ã€‚

ğŸš© æˆ‘ä»¬å°†å‘å¸ƒ LangServe çš„æ‰˜ç®¡ç‰ˆæœ¬ï¼Œä»¥ä¾¿ä¸€é”®éƒ¨ç½² LangChain åº”ç”¨ç¨‹åºã€‚[åœ¨æ­¤æ³¨å†Œ](https://airtable.com/app0hN6sd93QcKubv/shrAjst60xXa6quV2) åŠ å…¥ç­‰å¾…åˆ—è¡¨ã€‚

## å¿«é€Ÿå¼€å§‹

è¦ä½¿ç”¨ï¼Œé¦–å…ˆå®‰è£… LangChain CLIã€‚

```shell
pip install -U langchain-cli
```

æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ LangChain é¡¹ç›®ï¼š

```shell
langchain app new my-app
```

è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º `my-app` çš„æ–°ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š

- `app`: è¿™æ˜¯ LangServe ä»£ç æ‰€åœ¨çš„ä½ç½®
- `packages`: è¿™æ˜¯æ‚¨çš„é“¾æˆ–ä»£ç†æ‰€åœ¨çš„ä½ç½®

è¦å°†ç°æœ‰æ¨¡æ¿ä½œä¸ºåŒ…æ‹‰å…¥ï¼Œè¯·å…ˆè¿›å…¥æ–°é¡¹ç›®ï¼š

```shell
cd my-app
```

ç„¶åå°†æ¨¡æ¿ä½œä¸ºé¡¹ç›®æ·»åŠ è¿›æ¥ã€‚
åœ¨æœ¬å…¥é—¨æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªç®€å•çš„ `pirate-speak` é¡¹ç›®ã€‚
æ­¤é¡¹ç›®çš„ä½œç”¨æ˜¯å°†ç”¨æˆ·è¾“å…¥è½¬æ¢ä¸ºæµ·ç›—è¯­ã€‚

```shell
langchain app add pirate-speak
```

è¿™å°†æŠŠæŒ‡å®šçš„æ¨¡æ¿æ‹‰å…¥ `packages/pirate-speak`

ç„¶åä¼šæç¤ºæ‚¨æ˜¯å¦è¦å®‰è£…å®ƒã€‚
è¿™ç›¸å½“äºè¿è¡Œ `pip install -e packages/pirate-speak`ã€‚
é€šå¸¸åº”è¯¥æ¥å—è¿™ä¸€ç‚¹ï¼ˆæˆ–è€…ç¨åè¿è¡Œç›¸åŒçš„å‘½ä»¤ï¼‰ã€‚
æˆ‘ä»¬ä½¿ç”¨ `-e` è¿›è¡Œå®‰è£…ï¼Œä»¥ä¾¿å¦‚æœæ‚¨ä¿®æ”¹æ¨¡æ¿ï¼ˆæ‚¨å¯èƒ½ä¼šè¿™æ ·åšï¼‰ï¼Œåˆ™æ›´æ–°æ›´æ”¹ã€‚

ä¹‹åï¼Œå®ƒä¼šè¯¢é—®æ‚¨æ˜¯å¦è¦ä¸ºæ­¤é¡¹ç›®ç”Ÿæˆè·¯ç”±ä»£ç ã€‚
è¿™æ˜¯æ‚¨éœ€è¦æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­ä»¥å¼€å§‹ä½¿ç”¨æ­¤é“¾çš„ä»£ç ã€‚
å¦‚æœæˆ‘ä»¬æ¥å—ï¼Œå°†ä¼šçœ‹åˆ°ç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š

```shell
from pirate_speak.chain import chain as pirate_speak_chain

add_routes(app, pirate_speak_chain, path="/pirate-speak")
```

ç°åœ¨æ‚¨å¯ä»¥ç¼–è¾‘æ‚¨æ‹‰å–ä¸‹æ¥çš„æ¨¡æ¿äº†ã€‚
æ‚¨å¯ä»¥æ›´æ”¹ `packages/pirate-speak` ä¸­çš„ä»£ç æ–‡ä»¶ä»¥ä½¿ç”¨ä¸åŒçš„æ¨¡å‹ã€ä¸åŒçš„æç¤ºã€ä¸åŒçš„é€»è¾‘ã€‚
è¯·æ³¨æ„ï¼Œä¸Šè¿°ä»£ç ç‰‡æ®µå§‹ç»ˆæœŸæœ›æœ€ç»ˆé“¾å¯ä½œä¸º `from pirate_speak.chain import chain` å¯¼å…¥ï¼Œ
å› æ­¤æ‚¨åº”è¯¥ä¿æŒåŒ…çš„ç»“æ„è¶³å¤Ÿç›¸ä¼¼ä»¥å°Šé‡è¯¥è¦æ±‚ï¼Œæˆ–è€…å‡†å¤‡å¥½æ›´æ–°è¯¥ä»£ç ç‰‡æ®µã€‚

ä¸€æ—¦æ‚¨å®Œæˆäº†æ‰€éœ€çš„ä¿®æ”¹ï¼Œæ¥ä¸‹æ¥è¦åšçš„æ˜¯
ä¸ºäº†ä½¿ LangServe ä½¿ç”¨æ­¤é¡¹ç›®ï¼Œæ‚¨éœ€è¦ä¿®æ”¹ `app/server.py`ã€‚
å…·ä½“æ¥è¯´ï¼Œæ‚¨åº”è¯¥å°†ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ·»åŠ åˆ° `app/server.py` ä¸­ï¼Œä½¿æ–‡ä»¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```python
from fastapi import FastAPI
from langserve import add_routes
from pirate_speak.chain import chain as pirate_speak_chain

app = FastAPI()

add_routes(app, pirate_speak_chain, path="/pirate-speak")
```

ï¼ˆå¯é€‰ï¼‰ç°åœ¨è®©æˆ‘ä»¬é…ç½® LangSmithã€‚
LangSmith å°†å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªã€ç›‘è§†å’Œè°ƒè¯• LangChain åº”ç”¨ç¨‹åºã€‚
LangSmith ç›®å‰å¤„äºç§æœ‰æµ‹è¯•é˜¶æ®µï¼Œæ‚¨å¯ä»¥åœ¨ [æ­¤å¤„](https://smith.langchain.com/) æ³¨å†Œã€‚
å¦‚æœæ‚¨æ²¡æœ‰è®¿é—®æƒé™ï¼Œå¯ä»¥è·³è¿‡æ­¤éƒ¨åˆ†

```shell
export LANGCHAIN_TRACING_V2=true
export LANGCHAIN_API_KEY=<your-api-key>
export LANGCHAIN_PROJECT=<your-project>  # å¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä¸º "default"
```

å¯¹äºç‰¹å®šåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ OpenAI ä½œä¸º LLMï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¼å‡ºæˆ‘ä»¬çš„ OpenAI API å¯†é’¥ï¼š

```shell
export OPENAI_API_KEY=sk-...
```

ç„¶åæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ç”Ÿäº§å°±ç»ªçš„ç«¯ç‚¹ï¼Œä»¥åŠä¸€ä¸ªæ¸¸ä¹åœºï¼š

```shell
langchain serve
```

ç°åœ¨æ‚¨å¯ä»¥è·å¾—ä¸€ä¸ªå®Œå…¨éƒ¨ç½²çš„ LangServe åº”ç”¨ç¨‹åºã€‚
ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨ [http://127.0.0.1:8000/pirate-speak/playground/](http://127.0.0.1:8000/pirate-speak/playground/) ä¸Šç«‹å³è·å¾—ä¸€ä¸ªæ¸¸ä¹åœºï¼š

![Screenshot of the LangServe Playground interface with input and output fields demonstrating pirate speak conversion.](/img/playground.png "LangServe Playground Interface")

åœ¨ [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs) ä¸Šè®¿é—® API æ–‡æ¡£ï¼š

![Screenshot of the API documentation interface showing available endpoints for the pirate-speak application.](/img/docs.png "API Documentation Interface")

ä½¿ç”¨ LangServe Python æˆ– JS SDK ä¸ API äº¤äº’ï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ªå¸¸è§„çš„ [Runnable](https://python.langchain.com/docs/expression_language/) ä¸€æ ·ã€‚

```python
from langserve import RemoteRunnable

api = RemoteRunnable("http://127.0.0.1:8000/pirate-speak")
api.invoke({"text": "hi"})
```

å¿«é€Ÿå…¥é—¨åˆ°æ­¤ç»“æŸï¼
æ‚¨å·²æˆåŠŸä¸‹è½½äº†ç¬¬ä¸€ä¸ªæ¨¡æ¿ï¼Œå¹¶ä½¿ç”¨ LangServe éƒ¨ç½²äº†å®ƒã€‚


## é¢å¤–èµ„æº

### [æ¨¡æ¿ç´¢å¼•](docs/INDEX.md)

æ¢ç´¢å¯ç”¨äºä½¿ç”¨çš„è®¸

å¤šæ¨¡æ¿ - ä»é«˜çº§ RAG åˆ°ä»£ç†ã€‚

### [è´¡çŒ®](docs/CONTRIBUTING.md)

æƒ³è¦è´¡çŒ®æ‚¨è‡ªå·±çš„æ¨¡æ¿å—ï¼Ÿè¿™ç›¸å½“å®¹æ˜“ï¼è¿™äº›è¯´æ˜ä»‹ç»äº†å¦‚ä½•æ“ä½œã€‚

### [ä»åŒ…ä¸­å¯åŠ¨ LangServe](docs/LAUNCHING_PACKAGE.md)

æ‚¨è¿˜å¯ä»¥ç›´æ¥ä»åŒ…ä¸­å¯åŠ¨ LangServeï¼ˆæ— éœ€åˆ›å»ºæ–°é¡¹ç›®ï¼‰ã€‚
è¿™äº›è¯´æ˜æ¶µç›–äº†å¦‚ä½•æ“ä½œã€‚
```

è¯·æ³¨æ„ï¼Œä»¥ä¸Šç¿»è¯‘ä»…åŒ…å«æ ‡é¢˜ã€æ®µè½å’Œåˆ—è¡¨çš„å†…å®¹ï¼Œä¸”é©¼å³°å’Œä¸‹åˆ’çº¿å•è¯ä¸è¢«ç¿»è¯‘ã€‚